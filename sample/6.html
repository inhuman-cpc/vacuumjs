
<!DOCTYPE html>
<html class="no-touch no-js">
  <head>
    <meta charset="utf-8" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta id="viewport" name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#3F51B5"><link rel="manifest" href="/web/manifest.json"><link rel="canonical" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp"><link rel="icon" href="/web/imgs/favicon.ico"><link rel="stylesheet" media="screen" href="/web/styles/fundamentals.css"><meta name="google-site-verification" content="zFM_etMkM6oOvH6CNip7QxEbslAw6kJ2kiGJBYYBIcA"><title>分析关键呈现路径性能 | Web Fundamentals - Google Developers</title><meta itemprop="name" content="分析关键呈现路径性能 | Web Fundamentals - Google Developers"><meta property="og:title" content="分析关键呈现路径性能 | Web Fundamentals - Google Developers"><meta name="description" content="确定并解决关键呈现路径性能方面的瓶颈需要了解很多常见问题。让我们开始实践之旅，并找出常用的性能模式，从而帮助您优化网页。"><meta itemprop="description" content="确定并解决关键呈现路径性能方面的瓶颈需要了解很多常见问题。让我们开始实践之旅，并找出常用的性能模式，从而帮助您优化网页。"><meta itemprop="datePublished" content="2014-04-01"><meta itemprop="dateModified" content="2014-04-28"><link rel="alternate" hreflang="en" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=en"><link rel="alternate" hreflang="ar" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ar"><link rel="alternate" hreflang="de" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=de"><link rel="alternate" hreflang="es" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=es"><link rel="alternate" hreflang="fr" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=fr"><link rel="alternate" hreflang="it" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=it"><link rel="alternate" hreflang="ja" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ja"><link rel="alternate" hreflang="ko" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ko"><link rel="alternate" hreflang="nl" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=nl"><link rel="alternate" hreflang="pl" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=pl"><link rel="alternate" hreflang="pt-br" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=pt-br"><link rel="alternate" hreflang="ru" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ru"><link rel="alternate" hreflang="tr" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=tr"><link rel="alternate" hreflang="zh-cn" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-cn"><link rel="alternate" hreflang="zh-tw" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-tw"><link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers"><link itemprop="image" href="/web/imgs/logo.png"><meta property="og:site_name" content="分析关键呈现路径性能 | Web Fundamentals - Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-cn"><meta property="og:publisher" content="https://www.facebook.com/googlechrome"><meta property="og:image" content="https://developers.google.com/web/imgs/logo.png"><meta name="twitter:creator"><meta name="twitter:account_id" content="@chromiumdev"><meta name="twitter:site" content="@chromiumdev"><meta name="twitter:description" content="确定并解决关键呈现路径性能方面的瓶颈需要了解很多常见问题。让我们开始实践之旅，并找出常用的性能模式，从而帮助您优化网页。"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://developers.google.com/web/imgs/logo.png"><link rel="alternate" type="application/rss+xml" title="Web Fundamentals - Google Developers" href="/web/fundamentals/rss.xml"><link rel="alternate" type="application/atom+xml" title="Web Fundamentals - Google Developers" href="/web/fundamentals/atom.xml"><body class="page--" itemscope itemtype="http://schema.org/WebSite"><div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header"><header class="mdl-layout__header"><div class="mdl-layout__drawer-button wf-header__menu-btn"><svg class="wf-menu-svg" height="48" viewbox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></div><div class="mdl-layout__header-row"><span class="mdl-layout-title wf-header-title">分析关键呈现路径性能</span><div class="mdl-layout-spacer"></div><div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right wf-header__search-container"><form class="devsite-search-form" action="/s/results" method="GET"><label class="mdl-button mdl-js-button mdl-button--icon wf-btn__small wf-header__small-btn wf-header__search-btn" for="fixed-header-drawer-exp"><svg fill="#000000" height="48" viewbox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></label><div class="mdl-textfield__expandable-holder wf-header__search-expanding-container"><input class="mdl-textfield__input wf-header__search-field devsite-search-field devsite-search-query" type="text" name="q" autocomplete="off" id="fixed-header-drawer-exp"> <input type="hidden" name="p" id="search_project" value="/web" data-project-name="Google APIs for Web" data-project-path="/web" data-query-match></div></form></div></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title wf-nav-drawer__title"><img src="/web/imgs/developers-logo-no-brackets.svg" alt="Google Developers Logo"></span><nav class="mdl-navigation wf-nav-drawer__container"><ul class="wf-main-nav__list-level-1 wf-nav__list clear"><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/shows/?hl=zh-cn" title="Go to 节目">节目</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/tools/?hl=zh-cn" title="Go to 工具">工具</a></li><li class="wf-main-nav__item wf-main-nav__selected"><a class="wf-main-nav__link" href="/web/fundamentals/?hl=zh-cn" title="Go to 网页基础">网页基础</a><ul class="wf-main-nav__list-level-2 wf-nav__list clear"><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/getting-started/?hl=zh-cn" title="Go to 入门指导">入门指导</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/design-and-ui/?hl=zh-cn" title="Go to 设计和用户界面">设计和用户界面</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/discovery-and-monetization/?hl=en" title="Go to Discovery and monetization">Discovery and monetization</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/security/?hl=en" title="Go to Security and identity">Security and identity</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/performance/?hl=zh-cn" title="Go to 优化性能">优化性能</a><ul class="wf-main-nav__list-level-3 wf-nav__list clear"><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/performance/optimizing-content-efficiency/?hl=zh-cn" title="Go to 优化内容效率">优化内容效率</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link page-in-section" href="/web/fundamentals/performance/critical-rendering-path/?hl=zh-cn" title="Go to 关键呈现路径">关键呈现路径</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/performance/rendering/?hl=zh-cn" title="Go to 渲染性能">渲染性能</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/performance/performance-codelab/?hl=en" title="Go to Performance codelab">Performance codelab</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/performance/poor-connectivity/?hl=en" title="Go to Understand low bandwidth and high latency">Understand low bandwidth and high latency</a></li></ul></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/engage-and-retain/?hl=en" title="Go to Engage and retain users">Engage and retain users</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/native-hardware/?hl=en" title="Go to Native hardware access">Native hardware access</a></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/fundamentals/primers/?hl=en" title="Go to API primers">API primers</a></li></ul></li><li class="wf-main-nav__item"><a class="wf-main-nav__link" href="/web/updates/?hl=en" title="Go to Updates">Updates</a></li></ul></nav><div class="mdl-layout-spacer"></div><a class="wf-navdrawer__bottom-link" href="https://github.com/Google/WebFundamentals/tree/master/src/content/zh-cn/fundamentals/performance/critical-rendering-path/analyzing-crp.markdown" target="_blank"><div class="wf-navdrawer__bottom-link-container"><img src="/web/imgs/third_party/github-mark.svg" alt="Github logo"> 查看源码</div></a> <a class="wf-navdrawer__bottom-link" href="https://github.com/Google/WebFundamentals/issues/new?title=[ZH-CN]%20Feedback%20for:%20/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-cn" target="_blank"><div class="wf-navdrawer__bottom-link-container"><img src="/web/imgs/feedback.svg" alt="feedback icon"> 提交反馈</div></a></div><main class="mdl-layout__content"><div class="page-content"><div class="wf-promo-small-container"><img src="https://www.gstatic.com/images/branding/product/1x/chrome_512dp.png"><p class="mdl-typography--caption wf-promo-small__title">Progressive Web App Road Show 2016</p><p class="mdl-typography--caption wf-promo-small__description">Stopping in New York, Chicago, Austin, Toronto, Mountain View and Seattle. Learn more and <a href="https://events.withgoogle.com/pwa-roadshow-north-america/">sign up now.</a></p></div></div><div class="page-content"><p class="intro">确定并解决关键呈现路径性能方面的瓶颈需要了解很多常见问题。让我们开始实践之旅，并找出常用的性能模式，从而帮助您优化网页。</p><div class="wf-toc wf-highlight-list"><h3 class="wf-highlight-list__title">Contents</h3><ol class="wf-highlight-list__list" id="toc"><li><a href="#hello-world-experience" id="toc-hello-world-experience">Hello World experience</a></li><li><a href="#javascript--css" id="toc-javascript--css">结合使用 JavaScript 和 CSS</a></li><li><a href="#section" id="toc-section">性能模式</a></li></ol></div><p>优化关键呈现路径的目标是允许浏览器尽可能快地绘制网页：较快的页面呈现速度可以提高互动度、增加网页浏览量并<a href="http://www.google.com/think/multiscreen/success.html">提高转化率</a>。因此，我们希望通过优化要加载的资源和加载顺序，尽可能减少访问者注视空白屏幕的时间。</p><p>为了更好地介绍这一过程，我们先从最简单的情况开始讲解，逐步构建我们的网页，使其包含更多资源、样式和应用逻辑；在此过程中，我们还会了解出错的位置，以及如何优化每种情况。</p><p>最后，在开始之前，我们还要处理一件事&#8230;到目前为止，我们一直专注于资源（CSS、JS 或 HTML 文件）可进行处理之后浏览器中会发生什么，但忽略了从缓存或网络中提取资源的时间。在下一课中，我们将深入研究如何细致优化应用的网络方面，但同时（为了更贴近现实）我们将做出以下假设：</p><ul><li>到服务器的网络往返（传播延迟）将花费 100 毫秒</li><li>HTML 文档的服务器响应时间为 100 毫秒，而其他所有文件的响应时间均为 10 毫秒</li></ul><h2 id="hello-world-experience">Hello World experience</h2><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Critical Path: No Style<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/basic_dom_nostyle.html">尝试完整样例</a></p></div><p>我们将从基本的 HTML 标记和单个无 CSS 或 JavaScript 的图片开始，这与获得图片一样简单。现在，我们在 Chrome DevTools 中打开网络时间轴，并检查生成的资源瀑布流：</p><p><img src="images/waterfall-dom.png" alt="CRP" class="center"></p><p>不出所料，HTML 文件的下载时间大约为 200 毫秒。注意，蓝色线的透明部分表示浏览器在网络上等待（即尚未收到任何响应字节）的时间，而实体部分则显示收到第一个响应字节之后完成下载的时间。在上述示例中，HTML 下载量极少（不足 4K），因此我们仅需单个往返过程即可提取整个文件。因此，提取 HTML 文档大约耗时 200 毫秒，其中一半的时间花费在等待网络上，而另一半花费在服务器响应上。</p><p>HTML 内容准备就绪后，浏览器必须解析字节、将其转换为令牌，并构建 DOM 树。注意，DevTools 可以方便地在底部报告 <code>DOMContentLoaded</code> 事件的时间（216 毫秒），该时间也与蓝色垂直线相对应。HTML 下载结束和蓝色垂直线 (DOMContentLoaded) 之间的间隔是浏览器构建 DOM 树花费的时间，在此示例中仅为几毫秒。</p><p>最后，请注意一些有趣的事情：我们的&#8217;趣照&#8217;没有阻止 <code>domContentLoaded</code> 事件！ 这证明，我们无需等待网页上的每个资源即可构建呈现树甚至绘制网页：<strong>不是所有资源均对提供首次描绘起重要作用</strong>。事实上，就像我们将要看到的，我们谈论关键呈现路径时，通常谈论的是 HTML 标记、CSS 和 JavaScript。图片不会阻止网页的首次呈现，尽管如此，我们也应努力确保系统尽快绘制图片！</p><p>不过，系统会阻止图片上的<code>load</code>事件（亦常称为<code>onload</code>）：DevTools 在 335 毫秒时报告 onload 事件。回想一下，onload 事件标记的点是网页所需的<strong>所有资源</strong>均已下载并经过处理的点，这是加载微调控件可以在浏览器中停止微调的点，并且该点使用瀑布流中的红色垂直线进行标记。</p><h2 id="javascript--css">结合使用 JavaScript 和 CSS</h2><p>我们的&#8217;Hello World experience&#8217;页面表面看起来可能非常简单，但我们需要做大量的工作才能使其呈现出这种效果！ 不过在实践中，我们还需要 HTML 之外的很多资源：我们可能需要 CSS 样式表以及一个或多个添加网页互动性的脚本。我们将两者组合起来，看看会发生什么：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Critical Path: Measure Script<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">&quot;measureCRP()&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;timing.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/measure_crp_timing.html">尝试完整样例</a></p></div><p><em>添加 JavaScript 和 CSS 之前：</em></p><p><img src="images/waterfall-dom.png" alt="DOM CRP" class="center"></p><p><em>添加 JavaScript 和 CSS 之后：</em></p><p><img src="images/waterfall-dom-css-js.png" alt="DOM、CSSOM 和 JS" class="center"></p><p>添加外部 CSS 和 JavaScript 文件额外增加了两个针对瀑布流的请求（浏览器几乎会同时分派这两个请求），目前一切顺利。但请注意，<strong>现在，domContentLoaded 事件和 onload 事件之间的时间差小多了。这是怎么回事？</strong></p><ul><li>与纯 HTML 示例不同，我们现在还需要提取并解析 CSS 文件以构建 CSSOM，而且我们必须使用 DOM 和 CSSOM 来构建呈现树。</li><li>因为我们的网页上还有一个阻止解析器的 JavaScript 文件，因此在系统下载并解析 CSS 文件之前，domContentLoaded 事件将被阻止：JavaScript 可能会查询 CSSOM，因此在执行 JavaScript 之前，我们必须阻止和等待 CSS。</li></ul><p><strong>如果我们使用内联脚本代替外部脚本会怎样？</strong>表面上看这是一个微不足道的问题，但实际上却非常棘手。结果证明，即使将脚本直接内联到网页中，浏览器得知脚本意图的唯一可靠方式还是执行该脚本，而且正如我们了解的那样，在 CSSOM 构建完成之前，我们不能直接内联脚本。简言之，内联 JavaScript 也会阻止解析器。</p><p>不过，虽然内联脚本会阻止 CSS，但此操作仍可以加快网页呈现速度吗？ 如果最后一种情况很棘手，那这个问题会更棘手！ 我们试着操作下，看看会发生什么&#8230;</p><p><em>外部 JavaScript：</em></p><p><img src="images/waterfall-dom-css-js.png" alt="DOM、CSSOM 和 JS" class="center"></p><p><em>内联 JavaScript：</em></p><p><img src="images/waterfall-dom-css-js-inline.png" alt="DOM、CSSOM 和内联 JS" class="center"></p><p>我们减少了一个请求，但是 onload 和 domContentLoaded 的时间仍没有变化，为什么？ 这与 JavaScript 是内联的还是外部的没有关系，因为只要浏览器遇到脚本代码，它就会阻止和等待，直到 CSSOM 构建完成。另外，在我们的第一个示例中，浏览器是同时下载 CSS 和 JavaScript 的，而且下载行为几乎是在同一时间完成的。因此，在这一特定实例中，内联 JavaScript 代码没有太大意义！ 那我们就陷入僵局，没法提高网页呈现速度了吗？ 实际上，我们有多个不同的应对策略。</p><p>首先回想一下，所有内联脚本均会阻止解析器，但是对于外部脚本来说，我们可以添加<code>async</code>关键字来取消阻止解析器。我们来取消内联，并尝试一下上述方法：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Critical Path: Measure Async<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">&quot;measureCRP()&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">async</span> <span class="na">src=</span><span class="s">&quot;timing.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/measure_crp_async.html">尝试完整样例</a></p></div><p>阻止解析器的（外部）JavaScript：__</p><p><img src="images/waterfall-dom-css-js.png" alt="DOM、CSSOM 和 JS" class="center"></p><p>异步（外部）JavaScript：__</p><p><img src="images/waterfall-dom-css-js-async.png" alt="DOM、CSSOM 和 异步 JS" class="center"></p><p>好多了！ 解析 HTML 之后不久即会触发 domContentLoaded 事件：浏览器已得知不要阻止 JavaScript，而且因为没有其他阻止解析器的脚本，CSSOM 构建也可以同步进行了。</p><p>或者，我们也可以尝试另外一种方法，即同时内联 CSS 和 JavaScript：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Critical Path: Measure Inlined<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;style&gt;</span>
      <span class="nt">p</span> <span class="p">{</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span> <span class="p">}</span>
      <span class="nt">span</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="nb">red</span> <span class="p">}</span>
      <span class="nt">p</span> <span class="nt">span</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">none</span> <span class="p">}</span>
      <span class="nt">img</span> <span class="p">{</span> <span class="k">float</span><span class="o">:</span> <span class="k">right</span> <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script&gt;</span>
      <span class="kd">var</span> <span class="nx">span</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">span</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">&#39;interactive&#39;</span><span class="p">;</span> <span class="c1">// change DOM text content</span>
      <span class="nx">span</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;inline&#39;</span><span class="p">;</span>  <span class="c1">// change CSSOM property</span>
      <span class="c1">// create a new element, style it, and append it to the DOM</span>
      <span class="kd">var</span> <span class="nx">loadTime</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
      <span class="nx">loadTime</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s1">&#39;You loaded this page on: &#39;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
      <span class="nx">loadTime</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">loadTime</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/measure_crp_inlined.html">尝试完整样例</a></p></div><p><img src="images/waterfall-dom-css-inline-js-inline.png" alt="DOM、内联 CSS 和内联 JS" class="center"></p><p>注意：<em>domContentLoaded</em> 时间与前面示例中的时间没有区别：我们没有将 JavaScript 设置为异步，而是将 CSS 和 JS 同时内联到网页本身。这使得我们的 HTML 网页更大，但好处是浏览器无需等待提取外部资源，每个元素都已纳入网页。</p><p>如您所见，即使是非常简单的网页，优化关键呈现路径也不是一件轻而易举的事情：我们需要了解不同资源之间的依存关系图，需要确定哪些资源是&#8217;重要资源&#8217;，而且我们必须在名目繁多的策略中做出选择，找出在网页中添加这些资源的恰当方式。该问题不是一个方案可以解决的，每个网页都不尽相同，因此您必须按照相似的解决流程，找出最佳策略。</p><p>不过，我们可以回过头来，看看能否找出某些常规性能模式&#8230;</p><h2 id="section">性能模式</h2><p>最简单的可用网页仅由 HTML 标记组成：无 CSS、JavaScript 或其他类型的资源。要呈现此网页，浏览器必须初始化请求、等待 HTML 文档准备就绪、对其进行解析、构建 DOM，最后使其呈现在屏幕上：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Critical Path: No Style<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/basic_dom_nostyle.html">尝试完整样例</a></p></div><p><img src="images/analysis-dom.png" alt="Hello world CRP" class="center"></p><p><strong>T<sub>0</sub> 和 T<sub>1</sub> 之间的时间用于捕获网络和服务器处理时间。</strong> 在最理想的情况（HTML 文件较小）下，我们仅需一个网络往返过程即可提取整个文档；由于 TCP 传输协议的工作方式，较大的文件可能需要多个往返过程，我们将在以后的课程中重新探讨这一主题。<strong>因此，在最理想的情况下，上述网页具有一个往返过程（最少）关键呈现路径。</strong></p><p>现在，我们看一下带有外部 CSS 文件的同一网页：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/analysis_with_css.html">尝试完整样例</a></p></div><p><img src="images/analysis-dom-css.png" alt="DOM + CSSOM CRP" class="center"></p><p>再重复一下，我们需要一个网络往返过程来提取 HTML 文档，然后检索到的标记告知我们还需要 CSS 文件：这意味着，浏览器必须返回服务器并获取 CSS，然后才能在屏幕上呈现网页。<strong>因此，该网页最少需要两个往返过程才能显示</strong>，重复一下，CSS 文件可能需要多个往返过程，因此重点在&#8217;最少&#8217;。</p><p>我们来定义将用于描述关键呈现路径的词汇：</p><ul><li><strong>关键资源</strong>：可能阻止网页首次呈现的资源。</li><li><strong>关键路径长度</strong>：即往返过程数量，或提取所有关键资源所需的总时间。</li><li><strong>关键字节</strong>：实现网页首次呈现所需的总字节数，是所有关键资源的传输文件大小总和。 带有一个 HTML 网页的首个示例包含一项关键资源（HTML 文档），关键路径长度也与 1 个网络往返过程（假设文件较小）相等，而且总的关键字节数正好是 HTML 文档本身的传输大小。</li></ul><p>现在，我们将其与&#8217;HTML + CSS&#8217;示例的关键路径特征对比一下：</p><p><img src="images/analysis-dom-css.png" alt="DOM + CSSOM CRP" class="center"></p><ul><li><strong>2</strong> 种关键资源</li><li><strong>2</strong> 个或更多往返过程的最短关键路径长度</li><li><strong>9</strong> KB 的关键字节</li></ul><p>我们必须同时使用 HTML 和 CSS 来构建呈现树，因此 HTML 和 CSS 均为关键资源：浏览器仅在获取 HTML 文档之后提取 CSS，因此关键路径长度最短为两个往返过程；两种资源加起来的关键字节总量最多为 9 KB。</p><p>现在我们再向组合中添加一个额外的 JavaScript 文件！</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;app.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/analysis_with_css_js.html">尝试完整样例</a></p></div><p>我们添加了 app.js（网页上的外部 JavaScript 资源），而且据我们目前所了解的，这是一种解析器阻止（即关键）资源。更糟的是，为了执行 JavaScript 文件，我们还必须阻止并等待 CSSOM；注意，在<code>style.css</code>下载和 CSSOM 构建完成之前，浏览器将会暂停。</p><p><img src="images/analysis-dom-css-js.png" alt="DOM、CSSOM 和 JavaScript CRP" class="center"></p><p>不过，如果我们实际查看该网页的&#8217;网络瀑布流&#8217;，就会发现 CSS 和 JavaScript 请求几乎会在同一时间初始化：浏览器获取 HTML，发现这两种资源并初始化这两个请求。因此，上述网页具有以下关键路径特征：</p><ul><li><strong>3</strong> 种关键资源</li><li><strong>2</strong> 个或更多往返过程的最短关键路径长度</li><li><strong>11</strong> KB 的关键字节</li></ul><p>现在，我们拥有三种关键资源，关键字节总量最多为 11 KB，但是我们的关键路径长度仍然是两个往返过程，因为我们可以同时传输 CSS 和 JavaScript！ <strong>了解关键呈现路径的特征意味着能够确定关键资源，并了解浏览器将如何安排它们的提取时间。</strong> 我们继续分析示例&#8230;</p><p>与网站开发者交流之后，我们意识到网页中添加的 JavaScript 不必是阻止脚本：我们的某些分析和其他代码不会阻止网页呈现。了解这些后，我们就可以向脚本代码中添加<code>async</code>属性，以取消对解析器的阻止：</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;app.js&quot;</span> <span class="na">async</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/analysis_with_css_js_async.html">尝试完整样例</a></p></div><p><img src="images/analysis-dom-css-js-async.png" alt="DOM、CSSOM 和异步 JavaScript CRP" class="center"></p><p>对脚本进行异步编程具有以下几项优势：</p><ul><li>脚本再也不会阻止解析器，也不再是关键呈现路径的组成部分</li><li>因为没有其他关键脚本，CSS 也不需要阻止 domContentLoaded 事件</li><li>domContentLoaded 事件触发得越早，其他应用逻辑开始执行的时间就越早</li></ul><p>因此，我们经过优化的网页恢复到了具有两种关键资源（HTML 和 CSS）、具有两个往返过程的最短关键路径长度和 9 KB 的关键字节总量。</p><p>最后，假设 CSS 样式表仅用于打印， 那会如何呢？</p><div dir="ltr" class="highlight-module highlight-module--code highlight-module--right"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">media=</span><span class="s">&quot;print&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello <span class="nt">&lt;span&gt;</span>web performance<span class="nt">&lt;/span&gt;</span> students!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;div&gt;&lt;img</span> <span class="na">src=</span><span class="s">&quot;awesome-photo.jpg&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;app.js&quot;</span> <span class="na">async</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p><a class="highlight-module__cta mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="https://googlesamples.github.io/web-fundamentals/samples/fundamentals/performance/critical-rendering-path/analysis_with_css_nb_js_async.html">尝试完整样例</a></p></div><p><img src="images/analysis-dom-css-nb-js-async.png" alt="DOM、非阻止性 CSS 和异步 JavaScript CRP" class="center"></p><p>因为 style.css 资源仅用于打印，因此，浏览器不必阻止它就可以呈现网页。因此，只要 DOM 构建完成，浏览器即具有了呈现网页的足够信息！ 所以，该网页仅具有一种关键资源（HTML 文档），最小关键呈现路径长度为一个往返过程。</p></div><div class="wf-author__container mdl-grid page-content"><h6 class="mdl-cell--12-col">作者</h6><div class="wf-author__row mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet"><div class="wf-author__img-container"><img class="wf-author__profile-photo" src="https://developers.google.com/web/imgs/contributors/ilyagrigorik.jpg" alt="Profile photo of Ilya Grigorik"></div><div class="wf-author__info"><div class="wf-author__name"><a href="http://igvita.com" target="_blank" title="Ilya Grigorik's Homepage">Ilya Grigorik</a></div><p>Ilya is a Developer Advocate and Web Perf Guru</p></div></div></div><div class="wf-license-translation page-content"><p class="wf-cc-license">除非另有声明，这篇文章的内容基于 <a href="http://creativecommons.org/licenses/by/3.0/" itemprop="license">创意共用 3.0 许可</a>共享，样例代码基于<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 许可</a>共享。详细信息请查看我们的<a href="/site-policies">站点政策</a>.</p><button id="language-selection-menu" aria-label="Language selector" class="mdl-button mdl-js-button mdl-button--icon wf-btn__small"><svg fill="#000000" height="48" viewbox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></svg></button><ul class="mdl-menu mdl-menu--top-right mdl-js-menu mdl-js-ripple-effect" for="language-selection-menu"><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=en">English</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ar">العربية‬</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=de">Deutsch</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=es">Español</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=fr">Français</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=it">Italiano</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ja">日本語</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ko">한국어</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=nl">Nederlands</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=pl">Polski</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=pt-br">Português (Brasil)</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=ru">Pусский</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=tr">Türkçe</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-cn">中文 (简体)</a></li><li class="mdl-menu__item"><a class="wf-translation-link__link" href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/analyzing-crp?hl=zh-tw">中文（繁體）</a></li></ul></div><div class="wf-article-nav"><div class="wf-article-nav__link-container wf-article-nav__prev"><a class="wf-article-nav__link" title="前文" href="/web/fundamentals/performance/critical-rendering-path/measure-crp?hl=zh-cn"><div class="wf-article-nav__link-text-container"><span class="wf-article-nav__subtitle">前</span><div class="wf-article-nav__row"><div class="wf-article-nav__icon"><svg fill="#000000" height="48" viewbox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></div><div class="wf-article-nav__link-title">使用 Navigation Timing 评估关键呈现路径</div></div></div></a></div><div class="wf-article-nav__link-container wf-article-nav__next"><a class="wf-article-nav__link" title="后文" href="/web/fundamentals/performance/critical-rendering-path/optimizing-critical-rendering-path?hl=zh-cn"><div class="wf-article-nav__link-text-container"><span class="wf-article-nav__subtitle">后</span><div class="wf-article-nav__row"><div class="wf-article-nav__link-title">优化关键呈现路径</div><div class="wf-article-nav__icon"><svg fill="#000000" height="48" viewbox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></div></div></div></a></div></div><footer class="wf-footer"><div class="wf-footer__section-container"><div class="wf-footer-section"><ul class="wf-footer__list wf-footer__list--primary"><a href="/web/shows/?hl=zh-cn" title="Go to">节目</a><li class="sitemap__item sitemap__item--"><a class="sitemap-list__link sitemap-list__link--parent" href="/web?hl=zh-cn" title="Go to"></a></li><a href="/web/tools/?hl=zh-cn" title="Go to">工具</a><li class="sitemap__item sitemap__item--"><a class="sitemap-list__link sitemap-list__link--parent" href="/web?hl=zh-cn" title="Go to"></a></li><a href="/web/fundamentals/?hl=zh-cn" title="Go to">网页基础</a><li class="sitemap__item sitemap__item--"><a class="sitemap-list__link sitemap-list__link--parent" href="/web?hl=zh-cn" title="Go to"></a></li><a href="/web/updates/?hl=en" title="Go to">Updates</a><li class="sitemap__item sitemap__item--"><a class="sitemap-list__link sitemap-list__link--parent" href="/web?hl=zh-cn" title="Go to"></a></li><li><a href="/web/resources/">Resources</a></li></ul></div><div class="wf-footer-section"><header class="wf-footer__header"><h3 class="wf-footer__title"><a href="https://developers.google.com/" class="wf-footer__title--link"><img id="developers-logo-footer" src="/web/imgs/developers-logo_short.svg" alt="Google Developers logo"></a></h3><div class="wf-footer_social-icons"><a class="mdl-button mdl-js-button mdl-button--icon wf-btn__small wf-footer__small-btn" href="https://twitter.com/ChromiumDev"><?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 405 405" style="enable-background:new 0 0 405 405;" xml:space="preserve"><style type="text/css">
	.Shadow{fill:#FFFFFF;}
	.Round_x0020_Corners_x0020_10_x0020_pt{fill:none;}
	.Live_x0020_Reflect_x0020_X{fill:none;}
	.Illuminate_x0020_Yellow_x0020_{fill:#F4D63A;stroke:#FFFFFF;stroke-width:0.25;stroke-miterlimit:1;}
	.Tissue_x0020_Paper{opacity:0.75;fill:url(#SVGID_1_);}
	.st0{fill:#FFFFFF;}
</style><lineargradient id="SVGID_1_" gradientunits="userSpaceOnUse" x1="-410.9619" y1="-92.9878" x2="-409.9619" y2="-92.9878"><stop offset="0" style="stop-color:#01A14A"></stop><stop offset="2.520981e-03" style="stop-color:#0AA348"></stop><stop offset="1.981678e-02" style="stop-color:#42B13B"></stop><stop offset="3.763004e-02" style="stop-color:#74BD2F"></stop><stop offset="5.557010e-02" style="stop-color:#9FC725"></stop><stop offset="7.367052e-02" style="stop-color:#C1CF1D"></stop><stop offset="9.198509e-02" style="stop-color:#DCD617"></stop><stop offset="0.1106" style="stop-color:#EFDA13"></stop><stop offset="0.1297" style="stop-color:#FADD10"></stop><stop offset="0.15" style="stop-color:#FEDE0F"></stop><stop offset="0.3" style="stop-color:#F16624"></stop><stop offset="0.47" style="stop-color:#01A14A"></stop><stop offset="0.64" style="stop-color:#FEDE0F"></stop><stop offset="0.8012" style="stop-color:#F16624"></stop><stop offset="1" style="stop-color:#01A14A"></stop></lineargradient><path class="st0" d="M340.7,115.2c-10.1,4.5-20.9,7.5-32.2,8.8c11.6-6.9,20.5-17.9,24.7-31c-10.8,6.4-22.8,11.1-35.6,13.6 c-10.2-10.9-24.8-17.7-40.9-17.7c-31,0-56.1,25.1-56.1,56.1c0,4.4,0.5,8.7,1.5,12.8c-46.6-2.3-87.9-24.7-115.6-58.6 c-4.8,8.3-7.6,17.9-7.6,28.2c0,19.5,9.9,36.6,25,46.7c-9.2-0.3-17.8-2.8-25.4-7c0,0.2,0,0.5,0,0.7c0,27.2,19.3,49.8,45,55 c-4.7,1.3-9.7,2-14.8,2c-3.6,0-7.1-0.4-10.6-1c7.1,22.3,27.9,38.5,52.4,39c-19.2,15-43.4,24-69.7,24c-4.5,0-9-0.3-13.4-0.8 c24.8,15.9,54.3,25.2,86,25.2c103.2,0,159.6-85.5,159.6-159.6c0-2.4-0.1-4.9-0.2-7.3C323.7,136.4,333.2,126.5,340.7,115.2z"></path></svg></a> <a class="mdl-button mdl-js-button mdl-button--icon wf-btn__small wf-footer__small-btn" href="https://www.youtube.com/user/ChromeDevelopers"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewbox="0 0 48 48" fill="#000000"><defs><path id="yt-a" d="M0 0h47.99v48H0z"></path></defs><clippath id="yt-b"><use xlink:href="#yt-a" overflow="visible"></use></clippath><path clip-path="url(#yt-b)" d="M47.48 13.21s-.46-3.3-1.9-4.74c-1.82-1.92-3.86-1.92-4.8-2.04C34.08 5.94 24 6 24 6s-10.04-.06-16.74.42c-.92.12-2.96.12-4.78 2.04C1.04 9.9.56 13.2.56 13.2S.08 17.09 0 20.96v4.05c.08 3.88.56 7.75.56 7.75s.48 3.3 1.92 4.76c1.82 1.9 4.2 1.84 5.28 2.04 3.76.36 15.82.44 16.24.44 0 0 10.1.02 16.8-.46.92-.12 2.96-.12 4.78-2.04 1.44-1.44 1.92-4.74 1.92-4.74s.48-3.88.5-7.75v-4.05c-.04-3.87-.52-7.75-.52-7.75zM19.14 30V15.98L32 23.26 19.14 30z"></path></svg></a> <a class="mdl-button mdl-js-button mdl-button--icon wf-btn__small wf-footer__small-btn" href="https://plus.google.com/+GoogleChromeDevelopers"><svg xmlns="http://www.w3.org/2000/svg" width="48px" height="48px" viewbox="0 0 48 48" fill="#000000"><path fill="none" d="M0 0h48v48H0V0z"></path><path d="M45 22h-4v-4h-3v4h-4v3h4v4h3v-4h4z"></path><path fill="none" d="M3 10h28v28H3z"></path><path d="M17 21.49v5.37h7.6c-.6 3.27-3.44 5.64-7.6 5.64-4.61 0-8.34-3.89-8.34-8.5s3.73-8.5 8.34-8.5c2.07 0 3.93.71 5.4 2.11v.01l3.97-3.97C23.94 11.39 20.78 10 17 10 9.27 10 3 16.27 3 24s6.27 14 14 14c8.09 0 13.44-5.68 13.44-13.68 0-.98-.09-1.93-.24-2.83H17z"></path></svg></a></div></header><ul class="wf-footer__list wf-footer__list--secondary"><li><a href="https://www.google.com/">Google</a></li><li><a href="https://developers.google.com/site-terms">服务协议</a></li><li><a href="https://www.google.com/intl/en/policies/privacy">隐私政策</a></li><li><a href="https://developers.google.com/careers">职业</a></li></ul></div></div></footer></main></div><link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,500,700,400italic,700italic" rel="stylesheet" type="text/css"></body>

    <script src='/_static/js/material_design_lite-bundle.js'></script>
    <script>
      function initComments() {
        var commentElem = document.getElementById('gplus-comments');
        var parentElem = document.getElementById('gplus-comment-container');

        gapi.comments.render(commentElem, {
          href: commentElem.dataset.url,
          width: parentElem.offsetWidth,
          first_party_property: 'BLOGGER',
          view_type: 'FILTERED_POSTMOD'
        });
      }

      window.addEventListener('load', function() {
        if (document.getElementById('gplus-comments')) {
          var script = document.createElement('script');
          script.src = 'https://apis.google.com/js/plusone.js?onload=initComments';
          script.defer = true;
          document.head.appendChild(script);
        }
      });
    </script>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MB3LRF"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MB3LRF');</script>
    <!-- End Google Tag Manager -->
  </body>
</html>
